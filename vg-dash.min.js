"use strict";angular.module("com.2fdevs.videogular.plugins.dash",[]).directive("vgDash",["$window",function(e){return{restrict:"A",require:"^videogular",link:function(a,t,n,i){function r(){return"MediaSource"in e}var s,u=/^application\/dash\+xml/i;r()&&(a.isDASH=function(e){var a=u.test(e.type),t=e.src.indexOf&&e.src.indexOf(".mpd")>0;return a||t},a.onSourceChange=function(e){if(e.src){var t=e.src;a.isDASH(e)?angular.isFunction(dashjs&&dashjs.MediaPlayer)?(s=dashjs.MediaPlayer().create(),s.initialize(i.mediaElement[0],t,i.autoPlay),n.dashSilence&&"false"!=n.dashSilence&&s.getDebug().setLogToBrowserConsole(!1)):(s=new MediaPlayer(new Dash.di.DashContext),s.setAutoPlay(i.autoPlay),s.startup(),s.attachView(i.mediaElement[0]),s.attachSource(t)):s&&(s.reset(),s=null,i.mediaElement.attr("src",t),i.stop())}},a.$watch(function(){return i.sources},function(e){a.onSourceChange(e[0])}))}}}]);